<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.80.0" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>k8s-service | </title><meta property="og:title" content="k8s-service" />
<meta property="og:description" content="Deploys a kubernetes app" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/reference/aws/service_modules/aws-k8s-service/" />
<meta property="article:published_time" content="2021-07-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-02-02T14:46:49-05:00" />
<meta itemprop="name" content="k8s-service">
<meta itemprop="description" content="Deploys a kubernetes app">
<meta itemprop="datePublished" content="2021-07-21T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-02-02T14:46:49-05:00" />
<meta itemprop="wordCount" content="1078">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="k8s-service"/>
<meta name="twitter:description" content="Deploys a kubernetes app"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-188763285-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<link rel="preload" href="/scss/main.min.6a2a31668c671e2f88b68027cb883948020385444ca5c1838a6b3bc4bc48f256.css" as="style">
<link href="/scss/main.min.6a2a31668c671e2f88b68027cb883948020385444ca5c1838a6b3bc4bc48f256.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="/css/prism.css"/>

<script type="text/javascript">
    (function(e,t){var n=e.amplitude||{_q:[],_iq:{}};var r=t.createElement("script")
    ;r.type="text/javascript"
    ;r.integrity="sha384-girahbTbYZ9tT03PWWj0mEVgyxtZoyDF9KVZdL+R53PP5wCY0PiVUKq0jeRlMx9M"
    ;r.crossOrigin="anonymous";r.async=true
    ;r.src="https://cdn.amplitude.com/libs/amplitude-7.2.1-min.gz.js"
    ;r.onload=function(){if(!e.amplitude.runQueuedFunctions){
        console.log("[Amplitude] Error: could not load SDK")}}
    ;var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)
    ;function s(e,t){e.prototype[t]=function(){
        this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}
        var o=function(){this._q=[];return this}
        ;var a=["add","append","clearAll","prepend","set","setOnce","unset"]
        ;for(var u=0;u<a.length;u++){s(o,a[u])}n.Identify=o;var c=function(){this._q=[]
            ;return this}
        ;var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"]
        ;for(var p=0;p<l.length;p++){s(c,l[p])}n.Revenue=c
        ;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId", "enableTracking", "setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"]
        ;function v(e){function t(t){e[t]=function(){
            e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}
            for(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){
            e=(!e||e.length===0?"$default_instance":e).toLowerCase()
            ;if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]}
        ;e.amplitude=n})(window,document);

    amplitude.getInstance().init("3c2edcd34808a6431499f4cd9b034e34");

    amplitude.getInstance().logEvent("Viewed " + document.title + " Page", {
        url: window.location.href,
    });
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />



    <title>k8s-service | </title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080"><defs><style>.cls-1{fill:#ef7c52}.cls-2{fill:#fff}</style></defs><path class="cls-1" d="M498.58 679.17c-40 0-78.1-15.67-107.19-44.13l-.08-.07c-28.46-29.09-44.13-67.17-44.13-107.2v-5h62.46v5a88.95 88.95.0 00177.89.0 87.44 87.44.0 00-26-62.56 88.75 88.75.0 00-62.9-25.77h-5V377h5c40.68.0 78.55 15.46 106.64 43.55h0c28.87 28.87 44.77 67 44.77 107.24S634.09 606.14 605.22 635A149.78 149.78.0 01498.58 679.17z"/><path class="cls-2" d="M1010.17 528.07c0 39-15.25 75.65-43.32 103.71-27.45 27.45-64.05 42.09-103.09 42.09-34.77.0-67.71-16.47-93.94-38.43V795.5H717.36V388.38h52.46v32.33c26.23-22 59.17-38.43 93.94-38.43 39 0 75.64 14.64 103.09 42.09C994.92 452.43 1010.17 489 1010.17 528.07zm-52.46.0c0-51.85-42.1-94.55-94-94.55s-93.94 42.7-93.94 94.55 42.09 94.56 93.94 94.56S957.71 579.93 957.71 528.07z"/><path class="cls-2" d="M1515 388.38h52.46V667.77H1515V635.44c-26.23 22-59.17 38.43-93.94 38.43a146.76 146.76.0 01-103.7-42.09c-27.45-28.06-42.7-64.66-42.7-103.71s15.25-75.64 42.7-103.7A146.76 146.76.0 011421 382.28c34.77.0 67.71 16.47 93.94 38.43zm0 139.69c0-51.85-42.09-94.55-93.94-94.55s-93.94 42.7-93.94 94.55 42.09 94.56 93.94 94.56S1515 579.93 1515 528.07z"/><path class="cls-2" d="M1080.67 280.41h61.73v130.5h61.74v62.51H1142.4v82.05s0 54.51 61.74 54.7v57.05s-51.58 7.81-94.75-35.56c-29-29.07-28.72-65.64-28.72-65.64z"/><rect class="cls-2" x="348.09" y="738.86" width="303.54" height="60.73"/><rect class="cls-2" x="835.45" y="738.86" width="737.37" height="60.73"/></svg></span><span class="text-uppercase font-weight-bold"></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/run-x/opta" target="_blank" ><span>GitHub</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://slack.opta.dev" target="_blank" ><span>Slack</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/" ><span class="active">Opta</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




  


<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile" style="display: flex" class="justify-content-center align-items-center">
    <button style="display: block" class="btn btn-link td-sidebar__toggle d-md-none fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </div>
  <nav class="collapse td-sidebar-nav pt-4 pl-2" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Opta</a>
  </li>
  <ul>
    <li class="collapse show" id="">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/getting-started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="getting-started">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedaws" href="/getting-started/aws/">AWS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedgcp" href="/getting-started/gcp/">GCP</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedazure" href="/getting-started/azure/">Azure</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedlocal" href="/getting-started/local/">Local</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
  </li>
  <ul>
    <li class="collapse " id="installation">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/observability/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Observability</a>
  </li>
  <ul>
    <li class="collapse " id="observability">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-observabilitylogdna" href="/observability/logdna/">LogDNA Integration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-observabilitydatadog" href="/observability/datadog/">Datadog Integration</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">References</a>
  </li>
  <ul>
    <li class="collapse show" id="reference">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/aws/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">AWS</a>
  </li>
  <ul>
    <li class="collapse show" id="referenceaws">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/aws/environment_modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Environment</a>
  </li>
  <ul>
    <li class="collapse " id="referenceawsenvironment_modules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulescustom-terraform" href="/reference/aws/environment_modules/custom-terraform/">custom-terraform</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesaws-nodegroup" href="/reference/aws/environment_modules/aws-nodegroup/">aws-nodegroup</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesaws-ses" href="/reference/aws/environment_modules/aws-ses/">aws-ses</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesaws-base" href="/reference/aws/environment_modules/aws-base/">base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesdatadog" href="/reference/aws/environment_modules/datadog/">datadog</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesaws-dns" href="/reference/aws/environment_modules/aws-dns/">dns</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesexternal-ssl-cert" href="/reference/aws/environment_modules/external-ssl-cert/">external-ssl-cert</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesaws-k8s-base" href="/reference/aws/environment_modules/aws-k8s-base/">k8s-base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesaws-eks" href="/reference/aws/environment_modules/aws-eks/">k8s-cluster</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsenvironment_modulesrunx" href="/reference/aws/environment_modules/runx/">runx</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/aws/service_modules/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Service</a>
  </li>
  <ul>
    <li class="collapse show" id="referenceawsservice_modules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesk8s-manifest" href="/reference/aws/service_modules/k8s-manifest/">kubernetes-manifest</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_moduleslambda-function" href="/reference/aws/service_modules/lambda-function/">aws-lambda</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulescloudfront-distribution" href="/reference/aws/service_modules/cloudfront-distribution/">cloudfront-distribution</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesmongodb-atlas" href="/reference/aws/service_modules/mongodb-atlas/">mongodb-atlas</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-documentdb" href="/reference/aws/service_modules/aws-documentdb/">aws-documentdb</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-iam-role" href="/reference/aws/service_modules/aws-iam-role/">aws-iam-role</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-iam-user" href="/reference/aws/service_modules/aws-iam-user/">aws-iam-user</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-s3" href="/reference/aws/service_modules/aws-s3/">aws-s3</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-sns" href="/reference/aws/service_modules/aws-sns/">aws-sns</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-sqs" href="/reference/aws/service_modules/aws-sqs/">aws-sqs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-dynamodb" href="/reference/aws/service_modules/aws-dynamodb/">dynamodb-table</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_moduleshelm-chart" href="/reference/aws/service_modules/helm-chart/">helm-chart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-referenceawsservice_modulesaws-k8s-service" href="/reference/aws/service_modules/aws-k8s-service/">k8s-service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-mysql" href="/reference/aws/service_modules/aws-mysql/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-postgres" href="/reference/aws/service_modules/aws-postgres/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsservice_modulesaws-redis" href="/reference/aws/service_modules/aws-redis/">redis</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/azurerm/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Azure</a>
  </li>
  <ul>
    <li class="collapse " id="referenceazurerm">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/azurerm/environment_modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Environment</a>
  </li>
  <ul>
    <li class="collapse " id="referenceazurermenvironment_modules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermenvironment_modulesazure-base" href="/reference/azurerm/environment_modules/azure-base/">base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermenvironment_modulesdatadog" href="/reference/azurerm/environment_modules/datadog/">datadog</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermenvironment_modulesexternal-ssl-cert" href="/reference/azurerm/environment_modules/external-ssl-cert/">external-ssl-cert</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermenvironment_modulesazure-k8s-base" href="/reference/azurerm/environment_modules/azure-k8s-base/">k8s-base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermenvironment_modulesazure-aks" href="/reference/azurerm/environment_modules/azure-aks/">k8s-cluster</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermenvironment_modulesrunx" href="/reference/azurerm/environment_modules/runx/">runx</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/azurerm/service_modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Service</a>
  </li>
  <ul>
    <li class="collapse " id="referenceazurermservice_modules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermservice_modulesk8s-manifest" href="/reference/azurerm/service_modules/k8s-manifest/">kubernetes-manifest</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermservice_moduleshelm-chart" href="/reference/azurerm/service_modules/helm-chart/">helm-chart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermservice_modulesazure-k8s-service" href="/reference/azurerm/service_modules/azure-k8s-service/">k8s-service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermservice_modulesazure-postgres" href="/reference/azurerm/service_modules/azure-postgres/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermservice_modulesazure-redis" href="/reference/azurerm/service_modules/azure-redis/"></a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/google/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">GCP</a>
  </li>
  <ul>
    <li class="collapse " id="referencegoogle">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/google/environment_modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Environment</a>
  </li>
  <ul>
    <li class="collapse " id="referencegoogleenvironment_modules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesgcp-base" href="/reference/google/environment_modules/gcp-base/">base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesdatadog" href="/reference/google/environment_modules/datadog/">datadog</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesgcp-dns" href="/reference/google/environment_modules/gcp-dns/">dns</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesexternal-ssl-cert" href="/reference/google/environment_modules/external-ssl-cert/">external-ssl-cert</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesgcp-nodepool" href="/reference/google/environment_modules/gcp-nodepool/">gcp-nodegpool</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesgcp-k8s-base" href="/reference/google/environment_modules/gcp-k8s-base/">k8s-base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesgcp-gke" href="/reference/google/environment_modules/gcp-gke/">k8s-cluster</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulesrunx" href="/reference/google/environment_modules/runx/">runx</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleenvironment_modulescustom-terraform" href="/reference/google/environment_modules/custom-terraform/">custom-terraform</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/google/service_modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Service</a>
  </li>
  <ul>
    <li class="collapse " id="referencegoogleservice_modules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesk8s-manifest" href="/reference/google/service_modules/k8s-manifest/">kubernetes-manifest</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesgcp-gcs" href="/reference/google/service_modules/gcp-gcs/">gcp-gcs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesgcp-service-account" href="/reference/google/service_modules/gcp-service-account/">gcp-service-account</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_moduleshelm-chart" href="/reference/google/service_modules/helm-chart/">helm-chart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesgcp-k8s-service" href="/reference/google/service_modules/gcp-k8s-service/">k8s-service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesgcp-mysql" href="/reference/google/service_modules/gcp-mysql/">mysql</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesgcp-postgres" href="/reference/google/service_modules/gcp-postgres/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegoogleservice_modulesgcp-redis" href="/reference/google/service_modules/gcp-redis/">redis</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse " id="tutorials">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsupgrade_gke" href="/tutorials/upgrade_gke/">gkeupgrades</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialssecrets" href="/tutorials/secrets/">Secrets</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialschanging_domain" href="/tutorials/changing_domain/">Changing Domains</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialscontinuous_deployment" href="/tutorials/continuous_deployment/">Continuous Deployment</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialscron" href="/tutorials/cron/">Cron jobs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialscustom_image" href="/tutorials/custom_image/">Custom Image</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsdebugging" href="/tutorials/debugging/">Debugging</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsenvironment_variables" href="/tutorials/environment_variables/">Environment Variables</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsingress" href="/tutorials/ingress/">Ingress</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsservice2service" href="/tutorials/service2service/">Inter Service Communication</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialssecurely_accessing_network_locally" href="/tutorials/securely_accessing_network_locally/">Securely Accessing Opta Networks Locally</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialstemplatization_variables" href="/tutorials/templatization_variables/">Templatization Variables</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsupgrading_eks" href="/tutorials/upgrading_eks/">Upgrading Kubernetes Version on AWS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsopta_local_troubleshooting" href="/tutorials/opta_local_troubleshooting/">Local Troubleshooting</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsvpc_peering" href="/tutorials/vpc_peering/">AWS VPC Peering</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsdeploy_to_aws_button" href="/tutorials/deploy_to_aws_button/">Deploy to AWS Button</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsecr_access" href="/tutorials/ecr_access/">ECR Access</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsgcr_access" href="/tutorials/gcr_access/">GCR Access</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-tutorialsiam" href="/tutorials/iam/">IAM</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/compliance/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Compliance</a>
  </li>
  <ul>
    <li class="collapse " id="compliance">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/architecture/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Architecture &amp; Security</a>
  </li>
  <ul>
    <li class="collapse " id="architecture">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-architectureaws" href="/architecture/aws/">AWS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-architectureazure" href="/architecture/azure/">Azure</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-architecturegcp" href="/architecture/gcp/">GCP</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-architecturekubernetes" href="/architecture/kubernetes/">Kubernetes</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>



          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            
  
  
  
  
  
  <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
  
    
    
      
    
    
    
    
    
    
    

    <a href="https://github.com/run-x/opta-docs/edit/main/content/en/Reference/aws/service_modules/aws-k8s-service.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
    <a href="https://github.com/run-x/opta-docs/new/main/content/en/Reference/aws/service_modules/aws-k8s-service.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
    <a href="https://github.com/run-x/opta-docs/issues/new?title=k8s-service" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
    
      
      <a href="https://github.com/run-x/opta/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
    

  
  
  </div>





<nav id="TableOfContents">
  <ul>
    <li><a href="#features">Features</a>
      <ul>
        <li><a href="#externalinternal-image">External/Internal Image</a></li>
        <li><a href="#healthcheck-probe">Healthcheck Probe</a></li>
        <li><a href="#autoscaling">Autoscaling</a></li>
        <li><a href="#container-resources">Container Resources</a></li>
        <li><a href="#ingress">Ingress</a></li>
        <li><a href="#persistent-storage">Persistent Storage</a></li>
      </ul>
    </li>
    <li><a href="#fields">Fields</a></li>
    <li><a href="#outputs">Outputs</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
            
<div class="td-content">
	<h1>k8s-service</h1>
	<div class="lead">Deploys a kubernetes app</div>
	
	<p>The most important module for deploying apps, k8s-service deploys a kubernetes app.
It deploys your service as a rolling update securely and with simple autoscaling right off the bat&ndash; you
can even expose it to the world, complete with load balancing both internally and externally.</p>
<h2 id="features">Features</h2>
<h3 id="externalinternal-image">External/Internal Image</h3>
<p>This module supports deploying from an &ldquo;external&rdquo; image repository (currently only public ones supported)
by setting the <code>image</code> field to the repo (e.g. &ldquo;kennethreitz/httpbin&rdquo; in the examples). If you set the value to &ldquo;AUTO&rdquo; however,
it will automatically create a secure container repository with ECR on your account. You can then use the <code>Opta push</code>
command to push to it!</p>
<h3 id="healthcheck-probe">Healthcheck Probe</h3>
<p>One of the benefits of K8s is that it comes with built-in checks for the responsiveness of your server. These are called
<a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/"><em>liveness</em> and <em>readiness</em> probes</a>.</p>
<p>tl;dr An (optional) liveness probe determines whether your server should be restarted, and an (optional) readiness probe determines if traffic should
be sent to a replica or be temporarily rerouted to other replicas. Essentially smart healthchecks. For websockets Opta
just checks the tcp connection on the given port.</p>
<h3 id="autoscaling">Autoscaling</h3>
<p>As mentioned, autoscaling is available out of the box. We currently only support autoscaling
based on the pod&rsquo;s cpu and memory usage, but we hope to soon offer the ability to use 3rd party metrics like datadog
to scale. As mentioned in the k8s docs, the horizontal pod autoscaler (which is what we use) assumes a linear relationship between # of replicas
and cpu (twice the replicas means half expected cpu usage), which works well assuming low overhead.
The autoscaler then uses this logic to try and balance the cpu/memory usage at the percentage of request. So, for example,
if the target memory is 80% and we requested 100mb, then it&rsquo;ll try to keep the memory usage at 80mb. If it finds that
the average memory usage was 160mb, it would logically try to double the number of replicas.</p>
<h3 id="container-resources">Container Resources</h3>
<p>One of the other benefits of kubernetes is that a user can have fine control over the <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/">resources used by each of their containers</a>.
A user can control the cpu, memory and disk usage with which scheduling is made, and the max limit after which the container is killed.
With Opta, we expose such settings to the user, while keeping sensible defaults.</p>
<p><em>NOTE</em> We expose the resource requests and set the limits to twice the request values.</p>
<h3 id="ingress">Ingress</h3>
<p>You can control if and how you want to expose your app to the world! Check out
the <a href="/tutorials/ingress">Ingress</a> docs for more details.</p>
<h3 id="persistent-storage">Persistent Storage</h3>
<p>A user can now specify persistent storage to be provisioned for your servers and kept intact over your different
deployments + scaling. This will take form of a list of entries holding a <code>size</code> (size of the storage to create in
gigabytes) and <code>path</code> (path to put it on your server&rsquo;s container) field, like so:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">modules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">app</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">k8s-service</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">kennethreitz/httpbin</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">min_containers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">max_containers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;{vars.max_containers}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">liveness_probe_path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/get&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">readiness_probe_path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/get&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">http</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">80</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">public_uri</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;subdomain1.{parent.domain}&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">persistent_storage</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/DESIRED/PATH1&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">20</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 20 GB</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/DESIRED/PATH2&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">30</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># 30 GB</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#000">.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>Under the hood, an AWS EBS volume is being created to house your data for each coexisting server container of your app.</p>
<p><em>WARNING</em> Switching between having the persistent_storage field set or not will lead to some minor downtime as the
underlying resource kind is being switched.</p>
<p><em>NOTE</em> because of the nature of these volumes, they will not be cleaned up automatically unless during a service
destruction. If you wish to release the EBS volumes for whatever reason you will need to manually do so by deleting
the kubernetes persistent volume claims.</p>
<h2 id="fields">Fields</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>image</code></td>
<td>Set to AUTO to create a private repo for your own images. Otherwises attempts to pull image from public dockerhub</td>
<td><code>None</code></td>
<td>True</td>
</tr>
<tr>
<td><code>port</code></td>
<td>Specifies what port your app was made to be listened to. Currently it must be a map of the form <code>http: [PORT_NUMBER_HERE]</code> or <code>websocket: [PORT_NUMBER_HERE]</code>. Use <code>http</code> if you just have a vanilla http server and <code>websocket</code> for websockets.</td>
<td><em>none</em></td>
<td>False</td>
</tr>
<tr>
<td><code>ports</code></td>
<td>Specifies which port(s) your app exposes.</td>
<td><em>none</em></td>
<td>False</td>
</tr>
<tr>
<td><code>probe_port</code></td>
<td>The name of the port to use for readiness and liveness probes. Defaults to the first port listed.</td>
<td><em>none</em></td>
<td>False</td>
</tr>
<tr>
<td><code>min_containers</code></td>
<td>The minimum number of replicas your app can autoscale to.</td>
<td><code>1</code></td>
<td>False</td>
</tr>
<tr>
<td><code>max_containers</code></td>
<td>The maximum number of replicas your app can autoscale to.</td>
<td><code>3</code></td>
<td>False</td>
</tr>
<tr>
<td><code>autoscaling_target_cpu_percentage</code></td>
<td>See the <a href="https://docs.opta.dev/reference/aws/service_modules/aws-k8s-service/#autoscaling">autoscaling</a> section.</td>
<td><code>80</code></td>
<td>False</td>
</tr>
<tr>
<td><code>autoscaling_target_mem_percentage</code></td>
<td>See the <a href="https://docs.opta.dev/reference/aws/service_modules/aws-k8s-service/#autoscaling">autoscaling</a> section.</td>
<td><code>80</code></td>
<td>False</td>
</tr>
<tr>
<td><code>secrets</code></td>
<td>Deprecated, see <a href="/tutorials/secrets">secrets instructions</a>.</td>
<td><code>[]</code></td>
<td>False</td>
</tr>
<tr>
<td><code>env_vars</code></td>
<td>A map of key values to add to the container as environment variables (key is name, value is value). <code>yaml env_vars:  FLAG: &quot;true&quot; </code></td>
<td><code>[]</code></td>
<td>False</td>
</tr>
<tr>
<td><code>healthcheck_path</code></td>
<td>See the See the <a href="https://docs.opta.dev/reference/aws/service_modules/aws-k8s-service/#healthcheck-probe">liveness/readiness</a> section. Default <code>null</code> (i.e., no user-specified healthchecks)</td>
<td><code>None</code></td>
<td>False</td>
</tr>
<tr>
<td><code>liveness_probe_path</code></td>
<td>Use if liveness probe != readiness probe</td>
<td><code>None</code></td>
<td>False</td>
</tr>
<tr>
<td><code>readiness_probe_path</code></td>
<td>Use if liveness probe != readiness probe</td>
<td><code>None</code></td>
<td>False</td>
</tr>
<tr>
<td><code>initial_liveness_delay</code></td>
<td>Use if the initial delay needs to be changed.</td>
<td><code>30</code></td>
<td>False</td>
</tr>
<tr>
<td><code>initial_readiness_delay</code></td>
<td>Use if the initial delay needs to be changed.</td>
<td><code>30</code></td>
<td>False</td>
</tr>
<tr>
<td><code>consistent_hash</code></td>
<td>Use <a href="https://www.nginx.com/resources/wiki/modules/consistent_hash/">consistent hashing</a></td>
<td><code>None</code></td>
<td>False</td>
</tr>
<tr>
<td><code>sticky_session</code></td>
<td>Use <a href="https://stackoverflow.com/questions/10494431/sticky-and-non-sticky-sessions">sticky sessions</a> via cookies for your service (first request will send you a cookie called opta_cookie which you should add on future requests).</td>
<td><code>False</code></td>
<td>False</td>
</tr>
<tr>
<td><code>sticky_session_max_age</code></td>
<td>If the sticky session is enabled, how long should the cookie last?</td>
<td><code>86400</code></td>
<td>False</td>
</tr>
<tr>
<td><code>resource_request</code></td>
<td>See the <a href="https://docs.opta.dev/reference/aws/service_modules/aws-k8s-service/#container-resources">container resources</a> section. Default <code>yaml cpu: 100 # in millicores memory: 128 # in megabytes </code> CPU is given in millicores, and Memory is in megabytes.</td>
<td><code>{'cpu': 100, 'memory': 128}</code></td>
<td>False</td>
</tr>
<tr>
<td><code>public_uri</code></td>
<td>The full domain to expose your app under as well as path prefix. Must be the full parent domain or a subdomain referencing the parent as such: &ldquo;dummy.{parent[domain]}/my/path/prefix&rdquo;</td>
<td><code>[]</code></td>
<td>False</td>
</tr>
<tr>
<td><code>keep_path_prefix</code></td>
<td>Should we keep the prefix path which you set in the public uri when forwarding requests to your service?</td>
<td><code>False</code></td>
<td>False</td>
</tr>
<tr>
<td><code>additional_iam_policies</code></td>
<td>A list of extra IAM role policies not captured by Opta which you wish to give to your service.</td>
<td><code>[]</code></td>
<td>False</td>
</tr>
<tr>
<td><code>links</code></td>
<td>A list of extra IAM role policies not captured by Opta which you wish to give to your service.</td>
<td><code>[]</code></td>
<td>False</td>
</tr>
<tr>
<td><code>persistent_storage</code></td>
<td>A list persistent storages to add to each instance of your service (need to give a <code>size</code> which is the size in GB for the storage volume to be, and <code>path</code> which is the path in the filesystem of each instance to place it under)</td>
<td><code>[]</code></td>
<td>False</td>
</tr>
<tr>
<td><code>ingress_extra_annotations</code></td>
<td>These are extra annotations to add to ingress objects</td>
<td><code>{}</code></td>
<td>False</td>
</tr>
</tbody>
</table>
<h2 id="outputs">Outputs</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker_repo_url</code></td>
<td>The url of the docker repo created to host this app&rsquo;s images in this environment. Does not exist when using external images.</td>
</tr>
</tbody>
</table>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://slack.opta.dev/">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://slack.opta.dev/">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">

    Last modified
    February 2, 2022
    : <a  href="https://github.com/run-x/opta-docs/commit/5dff848d3476624ec50d022028a5164a700db391">Some minor fixes to the formatting and urls (#133) (5dff848)</a>

</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User support list" aria-label="User support list">
    <a class="text-white" target="_blank" rel="noopener" href="support@runx.dev" aria-label="User support list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/run-x/opta" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://join.slack.com/t/opta-group/shared_invite/zt-r1p9k1iv-4MP1IMZCT9mwwwdJH0HRyA" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 RunX Labs Inc. All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 











<script src="/js/main.min.77c88615773c4e1870aff3d1d71a5502a3ff02a94dffd042609b7c6b30a4d882.js" integrity="sha256-d8iGFXc8Thhwr/PR1xpVAqP/AqlN/9BCYJt8azCk2II=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
        apiKey: 'bea08e468733624be28405d3ec3c3c16',
        appId: 'FMCBQ14GCS',
        indexName: 'runx',
        inputSelector: '.td-search-input',
        debug: false 
    });
</script>



  </body>
</html>
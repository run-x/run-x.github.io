<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.87.0" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>IAM Guidance | </title><meta property="og:title" content="IAM Guidance" />
<meta property="og:description" content="How to configure your IAM to work with Opta
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/features/iam/iam/" /><meta property="article:section" content="Features" />
<meta property="article:published_time" content="2021-07-21T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-04-15T12:31:17+05:30" />

<meta itemprop="name" content="IAM Guidance">
<meta itemprop="description" content="How to configure your IAM to work with Opta
"><meta itemprop="datePublished" content="2021-07-21T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-04-15T12:31:17+05:30" />
<meta itemprop="wordCount" content="1204">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="IAM Guidance"/>
<meta name="twitter:description" content="How to configure your IAM to work with Opta
"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-188763285-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







<link rel="preload" href="/scss/main.min.04b0348bc7a790ea1e87e0c4ab69e585ed6f74e27ce15ecb742c47ddb63b05bc.css" as="style">
<link href="/scss/main.min.04b0348bc7a790ea1e87e0c4ab69e585ed6f74e27ce15ecb742c47ddb63b05bc.css" rel="stylesheet" integrity="">

<link rel="stylesheet" href="/css/custom.css">
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="/css/prism.css"/>

<script type="text/javascript">
    (function(e,t){var n=e.amplitude||{_q:[],_iq:{}};var r=t.createElement("script")
    ;r.type="text/javascript"
    ;r.integrity="sha384-girahbTbYZ9tT03PWWj0mEVgyxtZoyDF9KVZdL+R53PP5wCY0PiVUKq0jeRlMx9M"
    ;r.crossOrigin="anonymous";r.async=true
    ;r.src="https://cdn.amplitude.com/libs/amplitude-7.2.1-min.gz.js"
    ;r.onload=function(){if(!e.amplitude.runQueuedFunctions){
        console.log("[Amplitude] Error: could not load SDK")}}
    ;var i=t.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)
    ;function s(e,t){e.prototype[t]=function(){
        this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}
        var o=function(){this._q=[];return this}
        ;var a=["add","append","clearAll","prepend","set","setOnce","unset"]
        ;for(var u=0;u<a.length;u++){s(o,a[u])}n.Identify=o;var c=function(){this._q=[]
            ;return this}
        ;var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"]
        ;for(var p=0;p<l.length;p++){s(c,l[p])}n.Revenue=c
        ;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId", "enableTracking", "setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"]
        ;function v(e){function t(t){e[t]=function(){
            e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}
            for(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){
            e=(!e||e.length===0?"$default_instance":e).toLowerCase()
            ;if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]}
        ;e.amplitude=n})(window,document);

    amplitude.getInstance().init("3c2edcd34808a6431499f4cd9b034e34");

    amplitude.getInstance().logEvent("Viewed " + document.title + " Page", {
        url: window.location.href,
    });
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />



    <title>IAM Guidance | </title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080"><defs><style>.cls-1{fill:#ef7c52}.cls-2{fill:#fff}</style></defs><path class="cls-1" d="M498.58 679.17c-40 0-78.1-15.67-107.19-44.13l-.08-.07c-28.46-29.09-44.13-67.17-44.13-107.2v-5h62.46v5a88.95 88.95.0 00177.89.0 87.44 87.44.0 00-26-62.56 88.75 88.75.0 00-62.9-25.77h-5V377h5c40.68.0 78.55 15.46 106.64 43.55h0c28.87 28.87 44.77 67 44.77 107.24S634.09 606.14 605.22 635A149.78 149.78.0 01498.58 679.17z"/><path class="cls-2" d="M1010.17 528.07c0 39-15.25 75.65-43.32 103.71-27.45 27.45-64.05 42.09-103.09 42.09-34.77.0-67.71-16.47-93.94-38.43V795.5H717.36V388.38h52.46v32.33c26.23-22 59.17-38.43 93.94-38.43 39 0 75.64 14.64 103.09 42.09C994.92 452.43 1010.17 489 1010.17 528.07zm-52.46.0c0-51.85-42.1-94.55-94-94.55s-93.94 42.7-93.94 94.55 42.09 94.56 93.94 94.56S957.71 579.93 957.71 528.07z"/><path class="cls-2" d="M1515 388.38h52.46V667.77H1515V635.44c-26.23 22-59.17 38.43-93.94 38.43a146.76 146.76.0 01-103.7-42.09c-27.45-28.06-42.7-64.66-42.7-103.71s15.25-75.64 42.7-103.7A146.76 146.76.0 011421 382.28c34.77.0 67.71 16.47 93.94 38.43zm0 139.69c0-51.85-42.09-94.55-93.94-94.55s-93.94 42.7-93.94 94.55 42.09 94.56 93.94 94.56S1515 579.93 1515 528.07z"/><path class="cls-2" d="M1080.67 280.41h61.73v130.5h61.74v62.51H1142.4v82.05s0 54.51 61.74 54.7v57.05s-51.58 7.81-94.75-35.56c-29-29.07-28.72-65.64-28.72-65.64z"/><rect class="cls-2" x="348.09" y="738.86" width="303.54" height="60.73"/><rect class="cls-2" x="835.45" y="738.86" width="737.37" height="60.73"/></svg></span><span class="text-uppercase font-weight-bold"></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/run-x/opta" target="_blank" ><span>GitHub</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://slack.opta.dev" target="_blank" ><span>Slack</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/" ><span class="active">Opta</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




  


<div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile" style="display: flex" class="justify-content-center align-items-center">
    <button style="display: block" class="btn btn-link td-sidebar__toggle d-md-none fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </div>
  <nav class="collapse td-sidebar-nav pt-4 pl-2" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Opta</a>
  </li>
  <ul>
    <li class="collapse show" id="">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="concepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-conceptsoverview" href="/concepts/overview/">Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-conceptsenvironment" href="/concepts/environment/">Environment</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-conceptsmodule" href="/concepts/module/">Module</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-conceptslayer" href="/concepts/layer/">Layer</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/getting-started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="getting-started">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedaws" href="/getting-started/aws/">AWS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedgcp" href="/getting-started/gcp/">GCP</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedazure" href="/getting-started/azure/">Azure</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-getting-startedlocal" href="/getting-started/local/">Local</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/installation/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a>
  </li>
  <ul>
    <li class="collapse " id="installation">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Features</a>
  </li>
  <ul>
    <li class="collapse show" id="features">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/multi-region/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Multi-Region</a>
  </li>
  <ul>
    <li class="collapse " id="featuresmulti-region">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresmulti-regionmulti-region-dbs" href="/features/multi-region/multi-region-dbs/">AWS Multi-Region Database</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuressecrets" href="/features/secrets/">Secrets</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresterraform" href="/features/terraform/">Terraform Generator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featurescontinuous_deployment" href="/features/continuous_deployment/">Continuous Deployment</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featurescustom_image" href="/features/custom_image/">Custom Image</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/debugging/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Debugging</a>
  </li>
  <ul>
    <li class="collapse " id="featuresdebugging">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresdebuggingdebugging" href="/features/debugging/debugging/">Debug Running Pods</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresdebugginglocal_troubleshooting" href="/features/debugging/local_troubleshooting/">Local Troubleshooting</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresdebuggingsecurely_accessing_network_locally" href="/features/debugging/securely_accessing_network_locally/">Securely Accessing Opta Networks Locally</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/jobs/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Jobs</a>
  </li>
  <ul>
    <li class="collapse " id="featuresjobs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresjobscron" href="/features/jobs/cron/">Cron jobs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresjobsone_time_jobs" href="/features/jobs/one_time_jobs/">One-time Jobs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresjobsdb_migration" href="/features/jobs/db_migration/">Opta DB Migrations</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/networking/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Networking</a>
  </li>
  <ul>
    <li class="collapse " id="featuresnetworking">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresnetworkingnetwork_overview" href="/features/networking/network_overview/">Network Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresnetworkinghigh_availability" href="/features/networking/high_availability/">High Availability</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresnetworkingnetwork_monitoring" href="/features/networking/network_monitoring/">Network Monitoring</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresnetworkingsubnetting" href="/features/networking/subnetting/">Subnetting</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresnetworkingother_mesh" href="/features/networking/other_mesh/">Using Other Service Meshes</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/observability/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Observability</a>
  </li>
  <ul>
    <li class="collapse " id="featuresobservability">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresobservabilitylogdna" href="/features/observability/logdna/">LogDNA Integration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresobservabilitydatadog" href="/features/observability/datadog/">Datadog Integration</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/variables/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Variables</a>
  </li>
  <ul>
    <li class="collapse " id="featuresvariables">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresvariablesinput_variables" href="/features/variables/input_variables/">Input Variables</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresvariablesenvironment_variables" href="/features/variables/environment_variables/">Environment Variables</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/dns-and-cert/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">DNS and Certificate Configuration</a>
  </li>
  <ul>
    <li class="collapse " id="featuresdns-and-cert">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresdns-and-certexpose_self_signed_ssl" href="/features/dns-and-cert/expose_self_signed_ssl/">SSL without configuring DNS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresdns-and-certdns" href="/features/dns-and-cert/dns/">Configure DNS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresdns-and-certupdate-dns" href="/features/dns-and-cert/update-dns/">Update DNS</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/iam/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">IAM</a>
  </li>
  <ul>
    <li class="collapse show" id="featuresiam">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/features/iam/container-registry/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Container Registry Access</a>
  </li>
  <ul>
    <li class="collapse " id="featuresiamcontainer-registry">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresiamcontainer-registryecr_access" href="/features/iam/container-registry/ecr_access/">ECR Access</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresiamcontainer-registrygcr_access" href="/features/iam/container-registry/gcr_access/">GCR Access</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-featuresiamiam" href="/features/iam/iam/">IAM</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-featuresiamaccess-k8s" href="/features/iam/access-k8s/">Kubernetes Access</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">References</a>
  </li>
  <ul>
    <li class="collapse " id="reference">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/aws/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">AWS</a>
  </li>
  <ul>
    <li class="collapse " id="referenceaws">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawseks_access" href="/reference/aws/eks_access/">EKS Access</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/aws/modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Modules</a>
  </li>
  <ul>
    <li class="collapse " id="referenceawsmodules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulescustom-terraform" href="/reference/aws/modules/custom-terraform/">custom-terraform</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesk8s-manifest" href="/reference/aws/modules/k8s-manifest/">kubernetes-manifest</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmoduleslambda-function" href="/reference/aws/modules/lambda-function/">aws-lambda</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulescloudfront-distribution" href="/reference/aws/modules/cloudfront-distribution/">cloudfront-distribution</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesmongodb-atlas" href="/reference/aws/modules/mongodb-atlas/">mongodb-atlas</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-documentdb" href="/reference/aws/modules/aws-documentdb/">aws-documentdb</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-iam-role" href="/reference/aws/modules/aws-iam-role/">aws-iam-role</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-iam-user" href="/reference/aws/modules/aws-iam-user/">aws-iam-user</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-nodegroup" href="/reference/aws/modules/aws-nodegroup/">aws-nodegroup</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-s3" href="/reference/aws/modules/aws-s3/">aws-s3</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-ses" href="/reference/aws/modules/aws-ses/">aws-ses</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-sns" href="/reference/aws/modules/aws-sns/">aws-sns</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-sqs" href="/reference/aws/modules/aws-sqs/">aws-sqs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-base" href="/reference/aws/modules/aws-base/">base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesdatadog" href="/reference/aws/modules/datadog/">datadog</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-dns" href="/reference/aws/modules/aws-dns/">dns</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-dynamodb" href="/reference/aws/modules/aws-dynamodb/">dynamodb-table</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesexternal-ssl-cert" href="/reference/aws/modules/external-ssl-cert/">external-ssl-cert</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesexternal-state" href="/reference/aws/modules/external-state/">external-state</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesglobal-accelerator" href="/reference/aws/modules/global-accelerator/">global-accelerator</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmoduleshelm-chart" href="/reference/aws/modules/helm-chart/">helm-chart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-k8s-base" href="/reference/aws/modules/aws-k8s-base/">k8s-base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-eks" href="/reference/aws/modules/aws-eks/">k8s-cluster</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-k8s-service" href="/reference/aws/modules/aws-k8s-service/">k8s-service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-mysql" href="/reference/aws/modules/aws-mysql/">mysql</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-postgres" href="/reference/aws/modules/aws-postgres/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesaws-redis" href="/reference/aws/modules/aws-redis/">redis</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsmodulesrunx" href="/reference/aws/modules/runx/">runx</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawseks_upgrade" href="/reference/aws/eks_upgrade/">EKS Upgrade</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsdeploy_to_aws_button" href="/reference/aws/deploy_to_aws_button/">Deploy to AWS Button</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceawsvpc_peering" href="/reference/aws/vpc_peering/">VPC Peering</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/azurerm/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Azure</a>
  </li>
  <ul>
    <li class="collapse " id="referenceazurerm">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/azurerm/modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Modules</a>
  </li>
  <ul>
    <li class="collapse " id="referenceazurermmodules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesk8s-manifest" href="/reference/azurerm/modules/k8s-manifest/">kubernetes-manifest</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesazure-base" href="/reference/azurerm/modules/azure-base/">base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesdatadog" href="/reference/azurerm/modules/datadog/">datadog</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesexternal-ssl-cert" href="/reference/azurerm/modules/external-ssl-cert/">external-ssl-cert</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesexternal-state" href="/reference/azurerm/modules/external-state/">external-state</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmoduleshelm-chart" href="/reference/azurerm/modules/helm-chart/">helm-chart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesazure-k8s-base" href="/reference/azurerm/modules/azure-k8s-base/">k8s-base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesazure-aks" href="/reference/azurerm/modules/azure-aks/">k8s-cluster</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesrunx" href="/reference/azurerm/modules/runx/">runx</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesazure-k8s-service" href="/reference/azurerm/modules/azure-k8s-service/">k8s-service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesazure-postgres" href="/reference/azurerm/modules/azure-postgres/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referenceazurermmodulesazure-redis" href="/reference/azurerm/modules/azure-redis/"></a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/google/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">GCP</a>
  </li>
  <ul>
    <li class="collapse " id="referencegoogle">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/reference/google/modules/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Modules</a>
  </li>
  <ul>
    <li class="collapse " id="referencegooglemodules">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesk8s-manifest" href="/reference/google/modules/k8s-manifest/">kubernetes-manifest</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-base" href="/reference/google/modules/gcp-base/">base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesdatadog" href="/reference/google/modules/datadog/">datadog</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-dns" href="/reference/google/modules/gcp-dns/">dns</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesexternal-ssl-cert" href="/reference/google/modules/external-ssl-cert/">external-ssl-cert</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesexternal-state" href="/reference/google/modules/external-state/">external-state</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-gcs" href="/reference/google/modules/gcp-gcs/">gcp-gcs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-nodepool" href="/reference/google/modules/gcp-nodepool/">gcp-nodegpool</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-service-account" href="/reference/google/modules/gcp-service-account/">gcp-service-account</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemoduleshelm-chart" href="/reference/google/modules/helm-chart/">helm-chart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-k8s-base" href="/reference/google/modules/gcp-k8s-base/">k8s-base</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-gke" href="/reference/google/modules/gcp-gke/">k8s-cluster</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-k8s-service" href="/reference/google/modules/gcp-k8s-service/">k8s-service</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-mysql" href="/reference/google/modules/gcp-mysql/">mysql</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-postgres" href="/reference/google/modules/gcp-postgres/">postgres</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesgcp-redis" href="/reference/google/modules/gcp-redis/">redis</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulesrunx" href="/reference/google/modules/runx/">runx</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglemodulescustom-terraform" href="/reference/google/modules/custom-terraform/">custom-terraform</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-referencegooglegke_upgrade" href="/reference/google/gke_upgrade/">GKE Upgrade</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/security/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Security</a>
  </li>
  <ul>
    <li class="collapse " id="security">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-securityaws" href="/security/aws/">AWS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-securityazure" href="/security/azure/">Azure</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-securitygcp" href="/security/gcp/">GCP</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-securitykubernetes" href="/security/kubernetes/">Kubernetes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-securitycompliance" href="/security/compliance/">Compliance</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>



          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            
  
  
  
  
  
  <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
  
    
    
      
    
    
    
    
    
    
    

    <a href="https://github.com/run-x/opta-docs/edit/main/content/en/Features/IAM/iam.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
    <a href="https://github.com/run-x/opta-docs/new/main/content/en/Features/IAM/iam.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
    <a href="https://github.com/run-x/opta-docs/issues/new?title=IAM%20Guidance" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
    
      
      <a href="https://github.com/run-x/opta/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
    

  
  
  </div>





<nav id="TableOfContents">
  <ul>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#aws">AWS</a>
      <ul>
        <li><a href="#org--sso">Org + SSO</a></li>
        <li><a href="#new-account">New Account</a></li>
      </ul>
    </li>
    <li><a href="#gcp">GCP</a>
      <ul>
        <li><a href="#basic-management-architecture">Basic management architecture</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
            
<div class="td-content">
	<h1>IAM Guidance</h1>
	<div class="lead">How to configure your IAM to work with Opta</div>
	
	<h2 id="overview">Overview</h2>
<p>Identity access management, IAM, is how a user can control permissions to read and/or modify resources in their
cloud accounts. When Opta runs, it uses your currently configured credentials for your role/user of your cloud provider
to read your state, and update/create resources as needed. Due to the large amount and variety of resources opta
is responsible for, we recommend folks to use a role/user with account admin privileges for Opta, but we have plans to
provide more specific policies in the future. Furthermore, the k8s cluster needs authentication and
authorization to read and write resources to itself, which is tied to the cloud provider&rsquo;s IAM. Below, we go over the
specifics for the setup for each cloud.</p>
<h2 id="aws">AWS</h2>
<p>When creating a new AWS account, there are two routes you can go by</p>
<ol>
<li>Create and link accounts with <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_tutorials_basic.html">AWS Organizations</a>
and then use <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/what-is.html">AWS SSO</a> (yes, there are other SSO
options, but we won&rsquo;t cover those).</li>
<li>Create separate AWS accounts the old-fashioned way.</li>
</ol>
<p>We recommend using the AWS Organization route as, although it&rsquo;s a little extra setup, will make your life way easier when
scaling to multiple environments and accounts and AWS accounts themselves don&rsquo;t cost anything so fiscal prudence is not
a problem. Nonetheless, here are the instructions for both routes.</p>
<h3 id="org--sso">Org + SSO</h3>
<p>For this approach, you will need a &ldquo;root account&rdquo; to start with, which you can create via the traditional method. As
the creator, you will be bestowed with admin privileges. From there you can follow the official steps <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_tutorials_basic.html">here</a>
to setup your organization&ndash; you&rsquo;ll want to focus on the &ldquo;Create a member account&rdquo; section, and don&rsquo;t worry about the
organizational units or service control policies for now.</p>
<p>Once that&rsquo;s setup, we can create SSO for your Organization by going to the root AWS account and following the official
<a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/step1.html">steps</a>. You&rsquo;ll want to focus on steps 1, 2, and
3 for now, and for step 2 if you&rsquo;re using gsuite, go ahead and use that as your source by following <a href="https://aws.amazon.com/blogs/security/how-to-use-g-suite-as-external-identity-provider-aws-sso/">this</a>.
Once that&rsquo;s settled, you can <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/useraccess.html#assignusers">assign user access</a>
to the different accounts in your organization. For Opta usage, we recommend to use the SSO Admin access/permission set.</p>
<p><em>NOTE</em> If you want to deploy Opta in the root account (which we advise against), feel free to use the New Account section
instructions from down below</p>
<h3 id="new-account">New Account</h3>
<p>Outside of SSO, if one were to use Opta then you have to create a new IAM for Opta which your human teammates
could then &ldquo;<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html">assume</a>&rdquo;. This assumption allows IAM
users (and other roles too) to get credentials for the assumed role (time limited) and interact with the AWS API on their
behalf. <em>This way many people can get the same permissions and act as the same entity without compromising their own
personal credentials</em>. For role assumption, two things are required:</p>
<ol>
<li>The role to be assumed must have its trust policy include the role that would assume it (explicitly or through a group).
<img src="/images/iam_tutorial_image_1.png" alt="image alt text"></li>
<li>The assumer role/user must have the IAM permission to assume the Opta role.
<img src="/images/iam_tutorial_image_2.png" alt="image alt text"></li>
</ol>
<p>To create such a role and permission, you can start by following the official IAM role creation instructions
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html#roles-creatingrole-user-console">here</a>.
When prompted &ldquo;Specify accounts that can use this role&rdquo; add the own account id. This satisfies requirement 1 as now
the role will be ok with ANY IAM role/user in your account to assume it (you can refine the list later). Continue and
give it the Administrator Access policy (should be one of the first on the list), and create it (you can add tags if you
so wish). Now you have a role capable of executing AWS requests with admin privileges.
<img src="/images/iam_tutorial_image_3.png" alt="image alt text"></p>
<p>To satisfy requirement 2, all you have to do is follow this <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html">guide</a>
for all the IAM users/roles you have in question. You can then test it out by running the following with you current credentials:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">aws sts assume-role --role-arn <span style="color:#4e9a06">&#34;THE_OPTA_ROLE_ARN&#34;</span> --role-session-name DUMMY_SESSION
</code></pre></div><p>The output should be the temporary credentials to assume the Opta role. Just set the envars as so:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#204a87">export</span> <span style="color:#000">AWS_ACCESS_KEY_ID</span><span style="color:#ce5c00;font-weight:bold">=</span>RoleAccessKeyID
<span style="color:#204a87">export</span> <span style="color:#000">AWS_SECRET_ACCESS_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span>RoleSecretKey
<span style="color:#204a87">export</span> <span style="color:#000">AWS_SESSION_TOKEN</span><span style="color:#ce5c00;font-weight:bold">=</span>RoleSessionToken
</code></pre></div><p>You can now run Opta and any other AWS cli/sdk with the Opta role.</p>
<h4 id="cross-account-access">Cross Account Access</h4>
<p>If you want to give a user access to run Opta in account a while their IAM role/user is in account b, simply refine
the Opta role you created in account a to allow role assumption from account b (again, you can further specify which
iam users/roles are) and make sure that you allowed role assumption in the assumer to the new account.</p>
<h4 id="long-term-credentials">Long Term Credentials</h4>
<p>For long term credentials (e.g. to hardcode into a CI system), we recommend you create an IAM user who can then assume
the role used by Opta and using its credentials, assuming the Opta role as part of the process.</p>
<h2 id="gcp">GCP</h2>
<h3 id="basic-management-architecture">Basic management architecture</h3>
<p>In GCP, Google has created a distinct IAM/project/org flow which may seems backwards from the AWS model. Due to Google&rsquo;s
wide array of business products, GCP is often tightly integrated, as shall be explained:</p>
<p>Usage of GCP begins by first <a href="https://cloud.google.com/resource-manager/docs/creating-managing-organization">creating the organization</a>
under which all projects (equivalent to AWS accounts) would be created. This is done through either a <a href="https://support.google.com/a/answer/53926">Google Workspace</a>
(formerly called G Suite the same workspace used to setup your company&rsquo;s gmail, Google Calendar, Google Drive, etc&hellip;)
or a <a href="https://cloud.google.com/identity">Cloud Identy</a> (we advise to choose the Google Workspace). The first project
is created automatically upon signing in to GCP for the first time, although you can easily spin up many more as the need
arises, and can even bundle them into folders. Runx currently recommends 1 project per environment.</p>
<p><img src="/images/gcp-org.png" alt="image alt text"></p>
<p>You will, however, need to create at least one <a href="https://cloud.google.com/billing/docs/concepts">billing account</a> and
link it to the project before using any service. A billing account is how payment for GCP is handled, and they exist
as separate entities from the project (under the hood they link to a <a href="https://support.google.com/paymentscenter/topic/9017382?ref_topic=9037778">google payments profile</a>
but most users should not be concerned about this). An organization can have multiple billing accounts which can in turn
be linked to multiple projects to handle their payments (a project can only have 1 linked billing account). In this manner
can a company use different/the same budgets for different projects, and add restrictions or perform analysis as needed.</p>
<p><img src="/images/gcp-billing.png" alt="image alt text"></p>
<p><a href="https://cloud.google.com/iam/docs/overview#concepts_related_identity">IAM for humans</a> can similarly be handled by google
accounts setup in your google workspace/cloud identity, but also private google accounts or Google Groups (again, we
recommend using the workspace). These identities exist outside GCP, so are global to all orgs and can be given
access at the org level, project level, or folder level. As such, cross-account/project access doesn&rsquo;t really apply
and one just needs to ensure they have the desired permissions on the different projects in mind.</p>
<h4 id="opta-usage">Opta usage</h4>
<p>Once a project is setup with a correct billing account, Opta only needs to run as a project owner for the given
project (in time Opta will create a refined role so the full owner scope is not needed). You can do this by running:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">gcloud auth application-default login
</code></pre></div><h4 id="long-term-credentials-1">Long Term Credentials</h4>
<p>Long term credentials can be generated by creating a service account (akin to AWS IAM roles) with the required permissions
and <a href="https://cloud.google.com/docs/authentication/production#create_service_account">generating service account keys for it</a>.</p>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<div class="d-print-none">
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://slack.opta.dev/">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://slack.opta.dev/">tell us how we can improve</a>.
</p>
</div>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">

    Last modified
    April 15, 2022
    : <a  href="https://github.com/run-x/opta-docs/commit/66e7a3c974d3e77183a7e915cc47e8767aa2baa0">remove quotes (#179) (66e7a3c)</a>

</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User support email" aria-label="User support email">
    <a class="text-white" target="_blank" rel="noopener" href="mailto:info@runx.dev" aria-label="User support email">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing List" aria-label="Mailing List">
    <a class="text-white" target="_blank" rel="noopener" href="https://bit.ly/3KC0HKF" aria-label="Mailing List">
      <i class="fa fa-newspaper"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/run-x/opta" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://join.slack.com/t/opta-group/shared_invite/zt-r1p9k1iv-4MP1IMZCT9mwwwdJH0HRyA" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 RunX Labs Inc. All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 











<script src="/js/main.min.5c74b870c6953931a705f390a49c7e4c0a842ec5c83b24354758dd674343ed0d.js" integrity="sha256-XHS4cMaVOTGnBfOQpJx&#43;TAqELsXIOyQ1R1jdZ0ND7Q0=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
        apiKey: 'bea08e468733624be28405d3ec3c3c16',
        appId: 'FMCBQ14GCS',
        indexName: 'runx',
        inputSelector: '.td-search-input',
        debug: false 
    });
</script>



  </body>
</html>